<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard – Sugar Plum Creations</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="admin">
    <!-- Shared header -->
    <header class="header">
      <div class="header-brand">
        <img
          src="spc-logo-round.png"
          alt="Sugar Plum Creations logo"
          class="header-logo-img"
        />
        <a href="index.html" class="brand-link">
          <span class="brand-logo-text">Sugar Plum Creations</span>
        </a>
      </div>

      <nav class="header-nav">
        <a href="kiosk.html" class="nav-link">Kiosk</a>
        <a href="admin.html" class="nav-link nav-link-active">Admin</a>
      </nav>
    </header>

    <main class="admin-main">
      <!-- Announcement Banner Card -->
      <section class="card admin-section">
        <h2>Announcement Banner</h2>
        <p class="admin-help-text">
          Update the message that appears at the top of the customer site.
        </p>

        <form id="banner-form" class="admin-form">
          <label class="admin-label" for="bannerText">
            Banner Text
          </label>
          <textarea
            id="bannerText"
            name="bannerText"
            rows="3"
            class="admin-input"
            placeholder="Example: We’re at the Christmas Market this weekend! Orders ship on Monday."
          ></textarea>

          <label class="admin-checkbox">
            <input
              type="checkbox"
              id="bannerVisible"
              name="bannerVisible"
            />
            <span>Show banner on site</span>
          </label>

          <button type="submit" class="btn-primary">
            Save Settings
          </button>

          <p id="banner-status" class="admin-status"></p>
        </form>

        <!-- Shop Splash / Popup Controls -->
        <div class="admin-subsection">
          <h3>Shop Splash / Popup</h3>
          <p class="admin-help-text">
            Use this popup to temporarily close the online shop during events
            or while you are updating inventory. This will show a full-screen
            splash on the home/shop page (styled like the kiosk splash).
          </p>

          <div class="admin-form">
            <label class="admin-checkbox">
              <input type="checkbox" id="popupEnabled" />
              <span>Enable shop splash popup</span>
            </label>

            <label class="admin-label" for="popupMode">
              Popup Mode
            </label>
            <select id="popupMode" class="admin-input">
              <option value="none">None</option>
              <option value="event">Closed for Event</option>
              <option value="inventory">Updating Inventory</option>
              <option value="custom">Custom Message</option>
            </select>

            <label class="admin-label" for="popupCustomText">
              Custom Popup Message
            </label>
            <textarea
              id="popupCustomText"
              rows="3"
              class="admin-input"
              placeholder="Example: Hey loyal customers! We’re currently at an event today, and to avoid selling the same item in-person and online, the online shop is temporarily closed. It’ll reopen once the event wraps up – thank you for your understanding!"
            ></textarea>

            <p id="popup-status" class="admin-status"></p>
          </div>
        </div>

        <!-- Shipping Settings -->
        <div class="admin-subsection">
          <h3>Shipping Settings</h3>
          <p class="admin-help-text">
            These values control the shipping line added at checkout. The flat
            rate is charged on orders below the free shipping threshold; orders
            at or above the threshold get free shipping.
            <br />
            Be sure this threshold matches your free-shipping rules in Square.
          </p>

          <div class="admin-form">
            <label class="admin-label" for="shippingFlatRate">
              Flat-Rate Shipping ($)
            </label>
            <input
              id="shippingFlatRate"
              type="number"
              step="0.01"
              min="0"
              class="admin-input"
              placeholder="Example: 7.99"
            />

            <label class="admin-label" for="freeShippingThreshold">
              Free Shipping Threshold ($)
            </label>
            <input
              id="freeShippingThreshold"
              type="number"
              step="0.01"
              min="0"
              class="admin-input"
              placeholder="Example: 75.00"
            />

            <p id="shipping-status" class="admin-status"></p>
          </div>
        </div>
      </section>

      <!-- Inventory / Product Flags -->
      <section class="card admin-section" id="flags-section">
        <div class="flags-header-row">
          <h2>Inventory & Product Flags</h2>
          <button type="button" id="flags-toggle-btn" class="flags-toggle-btn">
            Collapse
          </button>
        </div>

        <p class="admin-help-text">
          Manage which designs are <strong>Pinned to the top</strong>, hidden
          from the <strong>online shop</strong> or <strong>kiosk</strong>, and
          which ribbon/tag appears on the product card (New, Featured, Custom).
        </p>

        <p id="products-status" class="admin-status"></p>

        <div class="flags-body">
          <div class="table-wrapper products-table-wrapper">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Subcategory</th>
                  <th>Total Inventory</th>
                  <th>Pin to top</th>
                  <th>Hide shop</th>
                  <th>Hide kiosk</th>
                  <th>Ribbon / Tag</th>
                </tr>
              </thead>
              <tbody id="flags-tbody">
                <tr>
                  <td colspan="7">Loading products…</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="flags-save-bar">
            <button id="save-flags-btn" type="button" class="btn-primary">
              Save Product Flags
            </button>
            <span id="flags-status" class="admin-status"></span>
          </div>
        </div>
      </section>

      <!-- Orders Card -->
      <section class="card admin-section">
        <h2>Recent Orders</h2>
        <p class="admin-help-text">
          Quick view of recent orders created from your website checkout.
          You can update status and add tracking here.
        </p>

        <div class="admin-orders-controls">
          <button id="refresh-orders" class="btn-secondary">
            Refresh Orders
          </button>
        </div>

        <div class="table-wrapper">
          <table class="admin-table" id="orders-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Customer</th>
                <th>Total</th>
                <th>Status</th>
                <th>Tracking #</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="orders-tbody">
              <tr>
                <td colspan="6">Loading orders…</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Monthly Archive Section -->
      <section class="card admin-section">
        <h2>Monthly Receipts Archive</h2>
        <p class="admin-help-text">
          Create a ZIP of this month’s exported receipts/invoices from the
          server <br />
          (from the <code>exports</code> folder), email it to you, and clear the
          originals.
        </p>

        <button id="archive-current-month" class="btn-secondary">
          Archive Current Month
        </button>

        <p id="archive-status" class="admin-status"></p>
      </section>
    </main>

    <script src="config.js"></script>
    <script src="admin.js"></script>
  </body>
</html>
